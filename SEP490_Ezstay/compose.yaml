version: '3.8'

services:
  amenityapi:
    image: amenityapi
    build:
      context: .
      dockerfile: AmenityAPI/Dockerfile
    ports:
      - "5000:5000"   # Nếu bạn muốn map port API
    depends_on:
      - mongodb

  mongodb:
    image: mongo:8.0
    container_name: mongodb
    ports:
      - "27017:27017"
    environment:
      MONGO_INITDB_ROOT_USERNAME: sa
      MONGO_INITDB_ROOT_PASSWORD: 123456
    volumes:
      - mongodb_data:/data/db

volumes:
  mongodb_data:

  roomamenityapi:
    image: roomamenityapi
    build:
      context: .
      dockerfile: RoomAmenityAPI/Dockerfile

  roomapi:
    image: roomapi
    build:
      context: .
      dockerfile: RoomAPI/Dockerfile

  apigateway:
    image: apigateway
    build:
      context: .
      dockerfile: APIGateway/Dockerfile

  signalrhubserver:
    image: signalrhubserver
    build:
      context: .
      dockerfile: SignalRHubServer/Dockerfile

  electricityreadingapi:
    image: electricityreadingapi
    build:
      context: .
      dockerfile: ElectricityReadingAPI/Dockerfile

  waterreadingapi:
    image: waterreadingapi
    build:
      context: .
      dockerfile: WaterReadingAPI/Dockerfile

  utility:
    image: utility
    build:
      context: .
      dockerfile: Utility/Dockerfile

  utilityreading:
    image: utilityreading
    build:
      context: .
      dockerfile: UtilityReading/Dockerfile

  utilityreadingapi:
    image: utilityreadingapi
    build:
      context: .
      dockerfile: UtilityReadingAPI/Dockerfile

  signalrhubapi:
    image: signalrhubapi
    build:
      context: .
      dockerfile: SignalRHubAPI/Dockerfile

  rentalrequest:
    image: rentalrequest
    build:
      context: .
      dockerfile: RentalRequest/Dockerfile

  rentalrequest:
    image: rentalrequest
    build:
      context: .
      dockerfile: RentalRequest/Dockerfile

services:
  rentalrequestapi:
    image: rentalrequestapi
    build:
      context: .
      dockerfile: RentalRequestAPI/Dockerfile

services:
  utilityrateapi:
    image: utilityrateapi
    build:
      context: .
      dockerfile: UtilityRateAPI/Dockerfile

services:
  grpcservice:
    image: grpcservice
    build:
      context: .
      dockerfile: GrpcService/Dockerfile

services:
  utilityreading.grpccontracts:
    image: utilityreading.grpccontracts
    build:
      context: .
      dockerfile: UtilityReading.GrpcContracts/Dockerfile

services:
  utilityrate.grpccontracts:
    image: utilityrate.grpccontracts
    build:
      context: .
      dockerfile: UtilityRate.GrpcContracts/Dockerfile

services:
  aggregatorapi:
    image: aggregatorapi
    build:
      context: .
      dockerfile: AggregatorAPI/Dockerfile

services:
  aggregatorapi:
    image: aggregatorapi
    build:
      context: .
      dockerfile: AggregatorAPI/Dockerfile

